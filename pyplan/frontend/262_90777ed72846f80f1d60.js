/*! Copyright Novix S.A. 2019. All rights reserved. */
(window.webpackJsonp=window.webpackJsonp||[]).push([[262,301],{2085:function(t,a,e){"use strict";(function(n,s){var l,i;l=[e(744),e(738),e(2086),e(2087)],void 0===(i=function(t,a,l,i){return n.View.extend({el:s("#main"),taskSchedulerCtrl:new t,arrPurgueSessions:[],arrOleDb:[],arrRunModel:[],arrAllTasks:[],initialize:function(){},render:function(){s('.container-fluid.mainTask[data-rel="task-scheduler"]').remove(),s("div[data-rel='run-model-task']").remove(),s("div[data-rel='oledb-task']").remove();var t=this,a=l();this.$el.append(a);var e=s(".task-scheduler-content");function n(){var t=s(window).height();t-=95,e.height(t-(s(".page-header").height()+20))}s(window).resize(n),n(),s(".run-model-task").on("click",function(){return t.runModelTask(t),!1}),s(".oledb-task").on("click",function(){return t.oledbTask(t),!1}),s(".filter-tabs a").on("click",function(){return t.filterTable(event,t),!1}),s(".btn-copy-task").on("click",function(){return t.copyTask(t),!1}),s(".btn-edit-task").on("click",function(){return t.editTask(t),!1}),s(".btn-delete-task").on("click",function(){return t.deleteTask(t),!1}),s(".btn-run-task").on("click",function(){return t.run(t),!1}),s(".btn-reset-task").on("click",function(){return t.reset(t),!1}),s("div[data-rel='task-scheduler']").find("div.abm-top-options a.btn-close").on("click",this.close);var i=s("#right-column").height();s("#tree-container").height(i),this.getThis().on("removeView",function(){t.onRemoveView()}),this.getThis().on("beforeRemoveView",function(a,e){t.onBeforeRemoveView(a,e)}),this.showList(),s(".btn-delete-task").attr("disabled",!0),s(".btn-edit-task").attr("disabled",!0),s(".btn-copy-task").attr("disabled",!0),s(".btn-run-task").attr("disabled",!0),s(".btn-reset-task").attr("disabled",!0)},fnGetSelected:function(){return s(".task-scheduler-content").find("tr.row_selected").attr("data-id")},close:function(){Promise.resolve().then(function(){var t=[e(684)];(function(t){(new t).removeTask("task-scheduler")}).apply(null,t)}).catch(e.oe)},editTask:function(t){var n=t.fnGetSelected();(new a).getTask(n,function(t){var a=t.scheduleTaskType;Promise.resolve().then(function(){var n=[e(744)];(function(e){0===a?(new e).showRunModelTask(t):2===a&&(new e).showOledbTask(t)}).apply(null,n)}).catch(e.oe)})},copyTask:function(t){var e=t.fnGetSelected();(new a).copyTask(e,function(a){t.showList()})},deleteTask:function(t){var e=t.fnGetSelected();(new a).deleteTask(e,function(){t.showList()})},showList:function(){var t=new a,e=this;s("#task-scheduler-table tbody").empty();var n=s("#task-scheduler-table").dataTable();n.fnClearTable(),n.fnDestroy(),e.arrAllTasks=[],e.arrRunModel=[],e.arrPurgueSessions=[],e.arrOleDb=[],t.list(function(t){for(var a={data:t},n=0;n<a.data.length;n++)a.data[n].enabled?(a.data[n].statusStr="Enabled",a.data[n].statusClass="success"):(a.data[n].statusStr="Disabled",a.data[n].statusClass="warning"),a.data[n].modelPath||(a.data[n].modelPath="N/A"),0===a.data[n].scheduleTaskType?(a.data[n].scheduleTaskTypeStr="Run Model",e.arrRunModel.push(a.data[n])):1===a.data[n].scheduleTaskType?(a.data[n].scheduleTaskTypeStr="Purgue session",e.arrPurgueSessions.push(a.data[n])):(a.data[n].scheduleTaskTypeStr="OleDB",e.arrOleDb.push(a.data[n])),e.arrAllTasks.push(a.data[n]);var l=i(a);s("#task-scheduler-table tbody").append(l),s("#task-scheduler-table tbody").find(".task-log-btn").on("click",function(t){return e.showTaskLog(t,e),!1}),e.instanceTable()})},instanceTable:function(){var t,a=s(".task-scheduler-content"),e=this;s("#task-scheduler-table tbody tr").click(function(a){s(this).hasClass("row_selected")?(s(this).removeClass("row_selected"),e.disableActions()):(t.$("tr.row_selected").removeClass("row_selected"),s(this).addClass("row_selected"),e.enableActions())}),t=a.find("table").dataTable()},disableActions:function(){s(".btn-delete-task").attr("disabled",!0),s(".btn-edit-task").attr("disabled",!0),s(".btn-copy-task").attr("disabled",!0),s(".btn-run-task").attr("disabled",!0),s(".btn-reset-task").attr("disabled",!0)},enableActions:function(){s(".btn-delete-task").attr("disabled",!1),s(".btn-edit-task").attr("disabled",!1),s(".btn-copy-task").attr("disabled",!1),s(".btn-run-task").attr("disabled",!1),s(".btn-reset-task").attr("disabled",!1)},filterTable:function(t,a){a.disableActions();for(var e=s(".filter-tabs li"),n=0;n<e.length;n++)s(e[n]).removeClass("active");s(t.currentTarget).parent().addClass("active");var l,o=s(t.currentTarget).attr("data-rel");s("#task-scheduler-table tbody").empty();var d=s("#task-scheduler-table").dataTable();d.fnClearTable(),d.fnDestroy(),l="sessions-tasks"===o?a.arrPurgueSessions:"run-model-tasks"===o?a.arrRunModel:"oledb-tasks"===o?a.arrOleDb:a.arrAllTasks;var r=i({data:l});s("#task-scheduler-table tbody").append(r),s("#task-scheduler-table tbody").find(".task-log-btn").on("click",function(t){return a.showTaskLog(t,a),!1}),a.instanceTable()},runModelTask:function(t){Promise.resolve().then(function(){var t=[e(684)];(function(t){var a="run-model-task";(new t).hideAllTasks(),(new t).addTask(a,"Add task"),(new t).selectTask(a,"Add task")}).apply(null,t)}).catch(e.oe)},oledbTask:function(t){Promise.resolve().then(function(){var t=[e(684)];(function(t){var a="oledb-task";(new t).hideAllTasks(),(new t).addTask(a,"Add task"),(new t).selectTask(a,"Add task")}).apply(null,t)}).catch(e.oe)},run:function(t){var e=t.fnGetSelected();(new a).runTask(e,function(t){})},reset:function(t){var e=t.fnGetSelected();(new a).resetTask(e,function(t){})},showTaskLog:function(t,n){var l=s(t.currentTarget).attr("data-id");e.e(13).then(function(){(function(s){var i=[e(736)];(function(e){(new a).getTaskLog(l,function(a){for(var l=0;l<a.length;l++){switch(a[l].state){case"0":a[l].stateStr="Ready",a[l].stateClass="info";break;case"1":a[l].stateStr="Running",a[l].stateClass="success";break;case"2":a[l].stateStr="Complete",a[l].stateClass="success";break;case"3":a[l].stateStr="Failed",a[l].stateClass="danger";break;case"4":a[l].stateStr="WaitForResources",a[l].stateClass="warning";break;case"5":a[l].stateStr="Info",a[l].stateClass="info"}var i=a[l].logDate.split("T");a[l].logDate=s(i[0]).format("YYYY/MM/DD")+" "+i[1],a[l].logStr=a[l].log}var o={title:"Task Log",content:a,left:t.clientX,top:t.clientY,className:"popover_workflow"};a.length>0&&(o.haveLog=!0),(new e).showTaskLog(o,function(t){n.oldPopover=t.options.id})})}).apply(null,i)}).call(this,e(134))}).catch(e.oe)},getThis:function(){return this.$el.find(".mainTask[data-rel='knowledge-base']")},onRemoveView:function(){this.el=s("#main")},onBeforeRemoveView:function(t,a){this.$el.find(".mainTask[data-rel='knowledge-base']").remove()}})}.apply(a,l))||(t.exports=i)}).call(this,e(218),e(1))},2086:function(t,a,e){var n=e(690);t.exports=(n.default||n).template({compiler:[7,">= 4.0.0"],main:function(t,a,e,n,s){return'<div class="abm-base-tmp container-fluid mainTask" data-rel="task-scheduler" data-type="tab-content">\n\n  \x3c!-- LIST VIEW --\x3e\n\n  <div class="box task-scheduler-content">\n    <div class="box-title">\n      <h3><i class="fa fa-th-list"></i>Schedule task</h3>\n      <div class="actions abm-top-options">\n        <a href="#" class="btn btn-close"><i class="fa fa-times"></i></a>\n      </div>\n    </div>\n    <div class="box-content abm-content">\n\n      <div class="row">\n        <div class="col-sm-6">\n\n          <div class="btn-group">\n            <a href="#" data-toggle="dropdown" class="btn dropdown-toggle" rel="tooltip" title="Create"\n              data-placement="bottom" data-original-title="Create">\n              <i class="fa fa-plus-circle"></i>\n              <span class="caret"></span>\n            </a>\n            <ul class="dropdown-menu">\n              <li>\n                <a href="#" class="run-model-task">Run model</a>\n              </li>\n              <li>\n                <a href="#" class="oledb-task">OleDB task</a>\n              </li>\n            </ul>\n          </div>\n          <button class="btn btn-copy-task" rel="tooltip" title="Duplicate task" data-placement="bottom"\n            data-original-title="Duplicate task"><i class="fa fa-files"></i></button>\n          <button class="btn btn-edit-task" rel="tooltip" title="Edit task" data-placement="bottom"\n            data-original-title="Edit task"><i class="fa fa-pencil"></i></button>\n          <button class="btn btn-delete-task" rel="tooltip" title="Delete task" data-placement="bottom"\n            data-original-title="Delete task"><i class="fa fa-trash"></i></button>\n        </div>\n        <div class="col-sm-6">\n          <p class="pull-right">\n            <button class="btn btn-green btn-run-task" rel="tooltip" title="Run task" data-placement="bottom"\n              data-original-title="Run task"><i class="fa fa-play"></i> Run task </button>\n            <button class="btn btn-orange btn-reset-task" rel="tooltip" title="Reset task" data-placement="bottom"\n              data-original-title="Reset task"><i class="fa fa-recycle"></i> Reset task</button>\n          </p>\n        </div>\n      </div>\n\n      <ul class="tabs tabs-inline tabs-top filter-tabs"\n        style="border-color: #DDD; border-width: 0 0 1px 0; border-style: solid;">\n        <li class="active">\n          <a href="#tab1" data-toggle="tab" data-rel="all-tasks">\n            <i class="fa fa-clock all-tasks"></i>All</a>\n        </li>\n        <li>\n          <a href="#tab1" data-toggle="tab" data-rel="sessions-tasks">\n            <i class="fa fa-lock"></i>Sessions</a>\n        </li>\n        <li>\n          <a href="#tab1" data-toggle="tab" data-rel="run-model-tasks">\n            <i class="fa fa-cube"></i>Models</a>\n        </li>\n        <li>\n          <a href="#tab1" data-toggle="tab" data-rel="oledb-tasks">\n            <i class="fa fa-database"></i>OleDB</a>\n        </li>\n      </ul>\n\n      <div class="tab-content padding tab-content-inline tab-content-bottom">\n\n        \x3c!-- START TAB --\x3e\n        <div class="tab-pane active" id="tab1">\n          <table id="task-scheduler-table" class="table table-nomargin table-bordered dataTable-selectable">\n            <thead>\n              <tr>\n                <th width="35%">Name</th>\n                <th width="10%">Type</th>\n                <th width="30%">Definition</th>\n                <th width="20%">Status</th>\n                <th width="5%">Log</th>\n              </tr>\n            </thead>\n            <tbody>\n\n            </tbody>\n          </table>\n        </div>\n        \x3c!-- END TAB --\x3e\n\n      </div>\n\n    </div>\n  </div>\n\n</div>'},useData:!0})},2087:function(t,a,e){var n=e(690);t.exports=(n.default||n).template({1:function(t,a,e,n,s){var l,i=null!=a?a:t.nullContext||{},o=e.helperMissing,d="function",r=t.escapeExpression;return'<tr role="row" class="odd" data-id="'+r(typeof(l=null!=(l=e.scheduleTaskId||(null!=a?a.scheduleTaskId:a))?l:o)===d?l.call(i,{name:"scheduleTaskId",hash:{},data:s}):l)+'">\n  <td width="35%" class="userName sorting_1">'+r(typeof(l=null!=(l=e.scheduleTaskName||(null!=a?a.scheduleTaskName:a))?l:o)===d?l.call(i,{name:"scheduleTaskName",hash:{},data:s}):l)+'</td>\n  <td width="10%">'+r(typeof(l=null!=(l=e.scheduleTaskTypeStr||(null!=a?a.scheduleTaskTypeStr:a))?l:o)===d?l.call(i,{name:"scheduleTaskTypeStr",hash:{},data:s}):l)+'</td>\n  <td width="30%">'+r(typeof(l=null!=(l=e.modelPath||(null!=a?a.modelPath:a))?l:o)===d?l.call(i,{name:"modelPath",hash:{},data:s}):l)+'</td>\n  <td width="20%">\n    <div class="options">\n        <span class="label label-'+r(typeof(l=null!=(l=e.statusClass||(null!=a?a.statusClass:a))?l:o)===d?l.call(i,{name:"statusClass",hash:{},data:s}):l)+'">'+r(typeof(l=null!=(l=e.statusStr||(null!=a?a.statusStr:a))?l:o)===d?l.call(i,{name:"statusStr",hash:{},data:s}):l)+'</span>\n    </div>\n  </td>\n  <td width="5%">\n    <div class="log">\n      <button class="btn task-log-btn" data-id="'+r(typeof(l=null!=(l=e.scheduleTaskId||(null!=a?a.scheduleTaskId:a))?l:o)===d?l.call(i,{name:"scheduleTaskId",hash:{},data:s}):l)+'" rel="tooltip" title="Show log" data-placement="bottom" data-original-title="Show log"><i class="fa fa-list-alt"></i></button>\n    </div>\n  </td>\n</tr>\n'},compiler:[7,">= 4.0.0"],main:function(t,a,e,n,s){var l;return null!=(l=e.each.call(null!=a?a:t.nullContext||{},null!=a?a.data:a,{name:"each",hash:{},fn:t.program(1,s,0),inverse:t.noop,data:s}))?l:""},useData:!0})},738:function(t,a,e){"use strict";(function(n){var s,l=e(693);void 0===(s=function(){return n.Model.extend({url:"myFileManager",getTask:function(t,a){(0,l.send)("scheduler/".concat(t,"/"),null,{type:"GET"},a)},getTaskLog:function(t,a){(0,l.send)("taskLog/by_periodic_task/",t,{type:"POST"},a,null,!0)},filterLogs:function(t,a){(0,l.send)("taskLog/filter_logs/",t,{type:"POST"},a,null,!0)},create:function(t,a,e){(0,l.send)("scheduler/",JSON.stringify(t),{type:"POST",contentType:"application/json;charset=utf-8",dataType:"text"},a,e,!1,!0)},edit:function(t,a,e){(0,l.send)("scheduler/".concat(t.id,"/"),JSON.stringify(t),{type:"PATCH",contentType:"application/json;charset=utf-8",dataType:"text"},a,e,!1,!0)},partialEdit:function(t,a,e,n){(0,l.send)("scheduler/".concat(t,"/"),JSON.stringify(a),{type:"PATCH",contentType:"application/json;charset=utf-8",dataType:"text"},e,n,!1,!0)},list:function(t){(0,l.send)("scheduler/",null,{type:"GET"},t)},deleteTask:function(t,a){(0,l.send)("scheduler/".concat(t,"/"),null,{type:"DELETE"},a)},runTask:function(t,a){var e=t.periodic_task_id;t.scheduleTaskId;(0,l.send)("scheduler/".concat(e,"/runTask/"),null,{type:"POST"},a)}})}.apply(a,[]))||(t.exports=s)}).call(this,e(218))}}]);