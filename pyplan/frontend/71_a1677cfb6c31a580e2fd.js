/*! Copyright Novix S.A. 2019. All rights reserved. */
(window.webpackJsonp=window.webpackJsonp||[]).push([[71,24],{1334:function(n,a,e){"use strict";(function(t,i){var l,o,c=e(18);l=[e(726),e(710),e(725),e(1963)],void 0===(o=function(n,a,l,o){return t.View.extend({el:i("#main"),_uId:"",render:function(){i("#mainLoading").show(),i("div[data-rel='abm-company']").remove();var e=new n,t=this;if(this._uId=i.uuid(),this.options.companyId)e.getCompany(this.options.companyId,function(n){var e={id:t._uId,dataRel:"abm-company",tmpClass:"company-edit",title:(0,c.translate)("_editCompany")},d={company:n},s=a(e),u=l(),r=o(d);t.$el.append(s),i("div[data-id='"+t._uId+"']").find("div.abm-content").append(u),i("div[data-id='"+t._uId+"']").find("div.form-content").append(r),(0,c.postRender)(t.$el.find("div[data-id='"+t._uId+"']")),t.addHandlers(),i("#mainLoading").hide()});else{var d={id:t._uId,dataRel:"abm-company",tmpClass:"company-create",title:(0,c.translate)("_newCompany")},s=a(d),u=l(),r=o();t.$el.append(s),i("div[data-id='"+t._uId+"']").find("div.abm-content").append(u),i("div[data-id='"+t._uId+"']").find("div.form-content").append(r),i("div[data-id='"+t._uId+"']").find("div.company-code input").removeAttr("disabled"),(0,c.postRender)(t.$el.find("div[data-id='"+t._uId+"']")),t.addHandlers(),i("#mainLoading").hide()}},save:function(){var a=this._uId,t=i("div[data-id='"+a+"']").find("form");if(!i(t).validate().errorList.length>0){var l=i("div[data-id='"+a+"']").find("div.company-name input").val(),o=i("div[data-id='"+a+"']").find("div.company-code input").val(),c=i("div[data-id='"+a+"']").find("div.company-active input").is(":checked"),d=i("div[data-id='"+a+"']").find("div.company-licence textarea").val(),s=new n,u={};this.options.companyId?(u={code:o,name:l,active:c,system:!1},""!=d.trim()&&(u.licence=d),s.partialUpdate(this.options.companyId,u,function(){Promise.resolve().then(function(){var n=[e(748)];(function(n){(new n).show()}).apply(null,n)}).catch(e.oe)})):(u={code:o,name:l,licence:d,active:c},s.create(u,function(){Promise.resolve().then(function(){var n=[e(748)];(function(n){(new n).show()}).apply(null,n)}).catch(e.oe)}))}},cancel:function(){Promise.resolve().then(function(){var n=[e(748)];(function(n){(new n).show()}).apply(null,n)}).catch(e.oe)},addHandlers:function(){i("div[data-id='"+this._uId+"']").find("form").on("submit",i.proxy(function(){return this.save(),!1},this)),i("div[data-id='"+this._uId+"']").find("div.submit button.btn-cancel").on("click",i.proxy(function(){return this.cancel(),!1},this)),i("div[data-id='"+this._uId+"']").find("div.abm-top-options a.btn-close").on("click",this.cancel)}})}.apply(a,l))||(n.exports=o)}).call(this,e(218),e(1))},1963:function(n,a,e){var t=e(690);function i(n){return n&&(n.__esModule?n.default:n)}n.exports=(t.default||t).template({1:function(n,a,e,t,i){return'        <input type="checkbox" class="icheck-me" value="1" data-skin="square" data-color="blue" checked />\n'},3:function(n,a,e,t,i){return'        <input type="checkbox" class="icheck-me" value="0" data-skin="square" data-color="blue" />\n'},compiler:[7,">= 4.0.0"],main:function(n,a,t,l,o){var c,d=null!=a?a:n.nullContext||{},s=n.escapeExpression,u=n.lambda;return'<div class="form-group">\n    <label for="textfield" class="col-sm-2 control-label">'+s(i(e(688)).call(d,"_name",{name:"L",hash:{},data:o}))+'</label>\n    <div class="col-sm-10">\n        <div class="col-sm-6 company-name">\n            <input type="text" value="'+s(u(null!=(c=null!=a?a.company:a)?c.name:c,a))+'" class="form-control" name="companyname" data-rule-required="true"\n                data-rule-minlength="3">\n        </div>\n    </div>\n</div>\n<div class="form-group">\n    <label for="textfield" class=" col-sm-2 control-label">'+s(i(e(688)).call(d,"_code",{name:"L",hash:{},data:o}))+'</label>\n    <div class="col-sm-10">\n        <div class="col-sm-6 company-code">\n            <input type="text" value="'+s(u(null!=(c=null!=a?a.company:a)?c.code:c,a))+'" class="form-control" disabled="disabled" data-rule-required="true">\n        </div>\n    </div>\n</div>\n<div class="form-group">\n    <label for="textfield" class="col-sm-2 control-label">'+s(i(e(688)).call(d,"active",{name:"L",hash:{},data:o}))+'</label>\n    <div class="col-sm-10 company-active">\n'+(null!=(c=i(e(689)).call(d,null!=(c=null!=a?a.company:a)?c.active:c,"==",!0,{name:"ifCond",hash:{},fn:n.program(1,o,0),inverse:n.program(3,o,0),data:o}))?c:"")+'    </div>\n</div>\n\n\n<div class="form-group">\n    <label for="textarea" class="col-sm-2 control-label">'+s(i(e(688)).call(d,"licence",{name:"L",hash:{},data:o}))+'</label>\n    <div class="company-licence col-sm-10">\n        <textarea rows="5" class="form-control">'+s(u(null!=(c=null!=a?a.company:a)?c.licence:c,a))+"</textarea>\n    </div>\n</div>"},useData:!0})},710:function(n,a,e){var t=e(690);n.exports=(t.default||t).template({compiler:[7,">= 4.0.0"],main:function(n,a,e,t,i){var l,o=null!=a?a:n.nullContext||{},c=e.helperMissing,d=n.escapeExpression;return'<div class="abm-base-tmp '+d("function"==typeof(l=null!=(l=e.tmpClass||(null!=a?a.tmpClass:a))?l:c)?l.call(o,{name:"tmpClass",hash:{},data:i}):l)+' container-fluid mainTask" data-id="'+d("function"==typeof(l=null!=(l=e.id||(null!=a?a.id:a))?l:c)?l.call(o,{name:"id",hash:{},data:i}):l)+'" data-rel="'+d("function"==typeof(l=null!=(l=e.dataRel||(null!=a?a.dataRel:a))?l:c)?l.call(o,{name:"dataRel",hash:{},data:i}):l)+'" data-type="tab-content">\n    <div class="row">\n        <div class="col-sm-12">\n            <div class="box">\n                <div class="box-title">\n                    <h3><i class="fa fa-th-list"></i>'+d("function"==typeof(l=null!=(l=e.title||(null!=a?a.title:a))?l:c)?l.call(o,{name:"title",hash:{},data:i}):l)+'</h3>\n                    <div class="actions abm-top-options">\n                        <a href="#" class="btn btn-close"><i class="fa fa-times"></i></a>\n                    </div>\n                </div>\n        <div class="box-content nopadding abm-content">\n\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n'},useData:!0})},725:function(n,a,e){var t=e(690);function i(n){return n&&(n.__esModule?n.default:n)}n.exports=(t.default||t).template({compiler:[7,">= 4.0.0"],main:function(n,a,t,l,o){var c=null!=a?a:n.nullContext||{},d=n.escapeExpression;return'<form action="#" id="baseForm" method="POST" class=\'form-horizontal form-bordered form-validate\' novalidate="novalidate">\n    <div class="form-content">\n\n    </div>\n    <div class="submit form-actions col-sm-12">\n        <button type="submit" class="btn btn-primary btn-save">'+d(i(e(688)).call(c,"_save",{name:"L",hash:{},data:o}))+'</button>\n        <button type="button" class="btn btn-cancel">'+d(i(e(688)).call(c,"cancel",{name:"L",hash:{},data:o}))+"</button>\n    </div>\n</form>\n"},useData:!0})},726:function(n,a,e){"use strict";(function(t){var i,l=e(693);void 0===(i=function(){return t.Model.extend({list:function(n){(0,l.send)("companies/?limit=1000&offset=0",null,null,n)},fullList:function(n){(0,l.send)("companies/list_with_groups_and_depts/",null,null,n)},getCompany:function(n,a){(0,l.send)("companies/".concat(n,"/"),null,null,a)},update:function(n,a,e){(0,l.send)("companies/".concat(n,"/"),JSON.stringify(a),{type:"PUT",contentType:"application/json;charset=utf-8",dataType:"text"},e)},partialUpdate:function(n,a,e){(0,l.send)("companies/".concat(n,"/"),JSON.stringify(a),{type:"PATCH",contentType:"application/json;charset=utf-8",dataType:"text"},e)},create:function(n,a){(0,l.send)("companies/",n,{type:"POST"},a)},delete:function(n,a){(0,l.send)("companies/".concat(n,"/"),null,{type:"DELETE"},a)},UpdateCompanyPreference:function(n,a,e){var t={companyId:__currentSession.companyId,preferenceCode:n,value:a};(0,l.send)("company/UpdateCompanyPreference",t,{type:"PUT"},e)},GetCompanyPreference:function(n,a){(0,l.send)("companies/preference_by_code/?code=".concat(n),null,{type:"GET"},a)},sendTestEmail:function(n,a){(0,l.send)("company/SendTestEmail",n,{type:"PUT"},a)},getLicenceKey:function(n,a){(0,l.send)("company/GetLK/"+n,null,null,a)},setLicenceKey:function(n,a){(0,l.send)("company/SetLK/",n,{type:"POST"},a)}})}.apply(a,[]))||(n.exports=i)}).call(this,e(218))}}]);